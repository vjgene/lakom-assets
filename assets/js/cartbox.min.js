/*! For license information please see cartbox.min.js.LICENSE.txt */
(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}!function(e){"use strict";var o=function(t,o){this.$el=e(t),this.options=o||{},this.init(),this.initAffix()};o.prototype.init=function(){e(document).on("click","[data-cart-control]",e.proxy(this.onControlClick,this)),this.$el.on("click",'[data-cart-toggle="order-type"]',e.proxy(this.onOrderTypeToggle,this)),e('select[name="address_id"]').on("change",e.proxy(this.deliveryCondition,this)),e('input[name="address[address_1]"]').on("change",e.proxy(this.deliveryCondition,this)),e('input[name="address[address_2]"]').on("change",e.proxy(this.deliveryCondition,this)),e('input[name="address[city]"]').on("change",e.proxy(this.deliveryCondition,this)),e('input[name="address[state]"]').on("change",e.proxy(this.deliveryCondition,this)),e('input[name="address[postcode]"]').on("change",e.proxy(this.deliveryCondition,this))},o.prototype.initAffix=function(){var t=this.$el.closest(".affix-cart"),o=e(".navbar-top").height(),n=e("footer.footer").outerHeight(!0),i=t.parent().width();t.affix({offset:{top:o,bottom:n}}),t.on("affixed.bs.affix",(function(){t.css("width",i)}))},o.prototype.refreshCart=function(t){},o.prototype.loadItem=function(t){var o=e.extend({},this.options,t.data(),{onSubmit:function(){this.hide()}});new e.fn.cartBox.modal(o)},o.prototype.addItem=function(t){e.request(this.options.updateItemHandler,{data:t.data(),loading:function(){console.log("loading")}})},o.prototype.removeItem=function(t){e.request(this.options.removeItemHandler,{data:t.data()})},o.prototype.applyCoupon=function(t){var o=this.$el.find('[name="coupon_code"]');e.request(this.options.applyCouponHandler,{data:{code:o.val()}})},o.prototype.removeCondition=function(t){e.request(this.options.removeConditionHandler,{data:{conditionId:t.data("cartConditionId")}})},o.prototype.deliveryCondition=function(t){var o=e(t.currentTarget).find("option:selected");if(o.data("address-id")>0)e.request(this.options.deliveryConditionHandler,{data:{addressId:o.data("address-id")}});else{var n=e('input[name="address[address_1]"]'),i=e('input[name="address[address_2]"]'),r=e('input[name="address[city]"]'),a=e('input[name="address[state]"]'),d=e('input[name="address[postcode]"]');n.val()&&r.val()&&d.val()&&e.request(this.options.deliveryConditionHandler,{data:{address1:n.val(),address2:i.val(),city:r.val(),state:a.val(),postcode:d.val()}})}},o.prototype.confirmCheckout=function(t){var o=jQuery.Event("submitCheckoutForm"),n=e(t.data("request-form"));n.trigger(o),o.isDefaultPrevented()||n.request()},o.prototype.onControlClick=function(t){var o=e(t.currentTarget);switch(o.data("cartControl")){case"load-item":this.loadItem(o);break;case"add-item":this.addItem(o);break;case"refresh":this.refresh(o);break;case"remove-item":this.removeItem(o);break;case"remove-condition":this.removeCondition(o);break;case"delivery-condition":this.deliveryCondition(o);break;case"apply-coupon":this.applyCoupon(o);break;case"confirm-checkout":this.confirmCheckout(o)}return!1},o.prototype.onOrderTypeToggle=function(t){var o=e(t.currentTarget);e.request(this.options.changeOrderTypeHandler,{data:{type:o.val()}})},o.DEFAULTS={alias:"cart",checkoutHandler:null,loadItemHandler:null,updateItemHandler:null,removeItemHandler:null,applyCouponHandler:null,removeConditionHandler:null,deliveryConditionHandler:null,changeOrderTypeHandler:null};var n=e.fn.cartBox;e.fn.cartBox=function(n){var i=arguments;return this.each((function(){var r=e(this),a=r.data("ti.cartBox"),d=e.extend({},o.DEFAULTS,r.data(),"object"==t(n)&&n);a||r.data("ti.cartBox",a=new o(this,d)),"string"==typeof n&&a[n].apply(a,i)}))},e.fn.cartBox.Constructor=o,e.fn.cartBox.noConflict=function(){return e.fn.cartBox=n,this},e(document).render((function(){e('[data-control="cart-box"]').cartBox()}))}(window.jQuery)})();