/*! For license information please see local.timeslot.min.js.LICENSE.txt */
(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}!function(e){"use strict";void 0===e.fn&&(e.fn={}),void 0===e.fn.localTimePicker&&(e.fn.localTimePicker={});var i=function(t,i){this.$el=e(t),this.selectedType=null,this.options=i,this.init()};i.prototype.constructor=i,i.prototype.dispose=function(){this.unregisterHandlers(),this.$el=null},i.prototype.init=function(){this.typeSelector='[data-timepicker-control="type"]',this.dateSelector='[data-timepicker-control="date"]',this.timeSelector='[data-timepicker-control="time"]',this.registerHandlers(),this.fillDates(),this.togglePicker()},i.prototype.registerHandlers=function(){this.$el.on("click","[data-timepicker-option]",e.proxy(this.onOptionClicked,this)),this.$el.on("change","[data-timepicker-control]",e.proxy(this.onControlChange,this)),this.$el.on("click","[data-timepicker-submit]",e.proxy(this.onSubmitForm,this))},i.prototype.unregisterHandlers=function(){this.$el.off("click","[data-timepicker-option]",e.proxy(this.onOptionClicked,this)),this.$el.off("change","[data-timepicker-control]",e.proxy(this.onControlChange,this)),this.$el.off("click","[data-timepicker-submit]",e.proxy(this.onSubmitForm,this))},i.prototype.togglePicker=function(){var t=this.selectedType?this.selectedType:this.$el.find(this.typeSelector).val(),i=this.$el.find(".dropdown-content");e("[data-timepicker-option]").removeClass("active"),e('[data-timepicker-option="'+t+'"]').addClass("active"),"asap"===t?i.addClass("hide"):i.removeClass("hide")},i.prototype.fillDates=function(){var t=this,i=this.$el.find(this.dateSelector).data("timepicker-selected");this.options.timeSlot.hasOwnProperty("dates")&&(e.each(this.options.timeSlot.dates,(function(e,o){t.$el.find(t.dateSelector).append('<option value="'+e+'"'+(i===o?'selected="selected"':"")+">"+o+"</option>")})),this.$el.find(this.dateSelector).change())},i.prototype.fillHours=function(){var t=this,i=this.$el.find(this.timeSelector).data("timepicker-label"),o=this.$el.find(this.timeSelector).data("timepicker-selected"),n=this.$el.find(this.dateSelector).val();this.options.timeSlot.hours.hasOwnProperty(n)&&(this.$el.find(this.timeSelector).html('<option value="">'+i+"</option>"),e.each(this.options.timeSlot.hours[n],(function(e,i){t.$el.find(t.timeSelector).append('<option value="'+e+'"'+(o===i?'selected="selected"':"")+">"+i+"</option>")})),this.$el.find(this.timeSelector).change())},i.prototype.onOptionClicked=function(t){var i=e(t.currentTarget).data("timepicker-option");t.stopPropagation(),this.selectedType=i,this.$el.find(this.typeSelector).trigger("change"),"asap"===this.selectedType&&this.onSubmitForm()},i.prototype.onControlChange=function(t){var i=e(t.currentTarget);switch(i.data("timepicker-control")){case"date":this.fillHours(i);break;case"type":this.togglePicker()}},i.prototype.onSubmitForm=function(){var t=this;t.$el.find(t.typeSelector).val(t.selectedType),e("[data-timepicker-submit]").closest("form").request(null,{data:{asap:"asap"===this.$el.find(this.typeSelector).val()?1:0,date:this.$el.find(this.dateSelector).val(),time:this.$el.find(this.timeSelector).val()}}).done((function(){t.fillDates(),t.togglePicker()}))},i.DEFAULTS={timeSlot:{}};var o=e.fn.localTimePicker;e.fn.localTimePicker=function(o){var n=Array.prototype.slice.call(arguments,1),r=void 0;return this.each((function(){var l=e(this),s=l.data("ti.localTimePicker"),c=e.extend({},i.DEFAULTS,l.data(),"object"==t(o)&&o);if(s||l.data("ti.localTimePicker",s=new i(this,c)),"string"==typeof o&&(r=s[o].apply(s,n)),void 0!==r)return!1})),r||this},e.fn.localTimePicker.Constructor=i,e.fn.localTimePicker.noConflict=function(){return e.fn.localTimePicker=o,this},e(document).render((function(){e('[data-control="timepicker"]').localTimePicker()}))}(window.jQuery)})();